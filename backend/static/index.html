<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - ETH Fraud Detection</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <style>
        body { 
            background: linear-gradient(135deg, #0a0e1a 0%, #1a1f2e 100%);
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
        }
        
        /* Glassmorphism effect */
        .glass-panel { 
            background: rgba(17, 24, 39, 0.6);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(55, 65, 81, 0.3);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
        
        /* Animated gradient background */
        .gradient-bg {
            background: linear-gradient(-45deg, #008B8B, #36454F, #4682b4, #1B1B1B);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* Hover effects */
        .hover-lift {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .hover-lift:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 139, 139, 0.3);
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #1a1f2e;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #008B8B;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #4682b4;
        }
        
        /* Pulse animation for stats */
        @keyframes pulse-glow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite;
        }
        
        /* Icon styling */
        .icon-wrapper {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 56px;
            height: 56px;
            border-radius: 16px;
            background: linear-gradient(135deg, rgba(0, 139, 139, 0.2), rgba(70, 130, 180, 0.2));
            border: 1px solid rgba(0, 139, 139, 0.3);
        }
        
        .icon-wrapper svg {
            width: 28px;
            height: 28px;
            stroke: #008B8B;
            stroke-width: 2;
            fill: none;
        }
        
        /* Feature card animations */
        .feature-card {
            transition: all 0.3s ease;
        }
        
        .feature-card:hover {
            transform: scale(1.02);
            border-color: rgba(0, 139, 139, 0.5);
        }
        
        /* Gradient text */
        .gradient-text {
            background: linear-gradient(135deg, #008B8B 0%, #4682b4 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Stat card glow */
        .stat-card {
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 139, 139, 0.1) 0%, transparent 70%);
            animation: rotate 10s linear infinite;
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Hero section animation */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fade-in-up {
            animation: fadeInUp 0.6s ease-out;
        }
    </style>
</head>
<body class="text-gray-200">

    <!-- Header -->
    <header class="glass-panel sticky top-0 z-50 border-b border-gray-800/50">
        <nav class="container mx-auto px-4 py-4 flex justify-between items-center">
            <h1 class="text-xl font-bold text-white flex items-center gap-2">
                <div class="icon-wrapper w-10 h-10">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" d="m9 12 2 2 4-4"/>
                    </svg>
                </div>
                Sentin<span class="gradient-text">ETH</span>
            </h1>
            <div class="flex space-x-6 text-sm font-medium">
                <a href="/" class="text-[#008B8B] border-b-2 border-[#008B8B] pb-1">Dashboard</a>
                <a href="/activity" class="text-gray-400 hover:text-white transition-colors pb-1">Predicted History</a>
                <a href="/live" class="text-gray-400 hover:text-white transition-colors pb-1">Live Sepolia Feed</a>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 py-8 space-y-8">
        
        <!-- Hero Section -->
        <section class="fade-in-up">
            <div class="text-center mb-12">
                <h1 class="text-5xl font-bold text-white mb-4">
                    Ethereum <span class="gradient-text">Fraud Detection</span> System
                </h1>
                <p class="text-gray-400 text-lg max-w-3xl mx-auto">
                    Real-time ML-powered fraud detection for Ethereum transactions with advanced risk scoring and wallet trust analysis
                </p>
            </div>
        </section>

        <!-- Stats Cards -->
        <section class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="glass-panel p-6 rounded-xl hover-lift stat-card">
                <div class="relative z-10">
                    <div class="flex items-center justify-between mb-4">
                        <div class="icon-wrapper">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M7 10v4h10v-4"/>
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 14v3a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-3"/>
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 14v4"/>
                            </svg>
                        </div>
                        <span class="text-xs text-gray-500 uppercase tracking-wider">Total Scanned</span>
                    </div>
                    <div class="text-4xl font-bold text-white mb-2" id="stat-total-tx">-</div>
                    <div class="text-sm text-gray-400">Transactions analyzed</div>
                    <div class="mt-4 flex items-center gap-2 text-green-400 text-sm">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
                        </svg>
                        <span>Live monitoring</span>
                    </div>
                </div>
            </div>
            
            <div class="glass-panel p-6 rounded-xl hover-lift stat-card border-red-900/30">
                <div class="relative z-10">
                    <div class="flex items-center justify-between mb-4">
                        <div class="icon-wrapper" style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(220, 38, 38, 0.2));">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="stroke: #ef4444;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v4"/>
                                <path stroke-linecap="round" stroke-linejoin="round" d="M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 17h.01"/>
                            </svg>
                        </div>
                        <span class="text-xs text-gray-500 uppercase tracking-wider">High Risk Detected</span>
                    </div>
                    <div class="text-4xl font-bold text-red-400 mb-2 pulse-glow" id="stat-high-tx">-</div>
                    <div class="text-sm text-gray-400">Flagged as suspicious</div>
                    <div class="mt-4 flex items-center gap-2 text-red-400 text-sm">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                        </svg>
                        <span>Requires attention</span>
                    </div>
                </div>
            </div>
            
            <div class="glass-panel p-6 rounded-xl hover-lift stat-card border-blue-900/30">
                <div class="relative z-10">
                    <div class="flex items-center justify-between mb-4">
                        <div class="icon-wrapper" style="background: linear-gradient(135deg, rgba(70, 130, 180, 0.2), rgba(59, 130, 246, 0.2));">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="stroke: #4682b4;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3 7v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2Z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3 7h18"/>
                            </svg>
                        </div>
                        <span class="text-xs text-gray-500 uppercase tracking-wider">Unique Wallets</span>
                    </div>
                    <div class="text-4xl font-bold text-[#4682b4] mb-2" id="stat-total-wallets">-</div>
                    <div class="text-sm text-gray-400">Addresses tracked</div>
                    <div class="mt-4 flex items-center gap-2 text-[#4682b4] text-sm">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                        </svg>
                        <span>Active monitoring</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Main Content Grid -->
        <section class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Project Overview -->
            <div class="lg:col-span-2 glass-panel p-8 rounded-xl shadow-xl hover-lift">
                <div class="flex items-center gap-3 mb-6">
                    <div class="h-1 w-12 bg-gradient-to-r from-[#008B8B] to-transparent rounded"></div>
                    <h2 class="text-2xl font-bold text-white">Project Overview</h2>
                </div>
                <p class="text-gray-400 leading-relaxed mb-6">
                    The Ethereum Fraud Detection System uses advanced Machine Learning (XGBoost) to analyze transaction patterns in real-time on the Sepolia Testnet. It assigns a <strong class="text-[#008B8B]">Risk Score (1-10)</strong> to every transaction and builds a persistent <strong class="text-[#4682b4]">Trust Score</strong> for every wallet interactively.
                </p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="feature-card bg-gradient-to-br from-green-900/20 to-green-800/10 p-5 rounded-xl border border-green-800/30">
                        <div class="flex items-center gap-2 mb-3">
                            <div class="w-8 h-8 rounded-lg bg-green-500/20 flex items-center justify-center">
                                <svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                                </svg>
                            </div>
                            <h3 class="font-semibold text-green-400">What We Do</h3>
                        </div>
                        <ul class="text-sm text-gray-400 space-y-2">
                            <li class="flex items-start gap-2">
                                <span class="text-green-500 mt-0.5">•</span>
                                <span>Real-time transaction interception via Oracle</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-green-500 mt-0.5">•</span>
                                <span>Feature engineering (Velocity, Volatility, Age)</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-green-500 mt-0.5">•</span>
                                <span>ML-based Fraud Probability prediction</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-green-500 mt-0.5">•</span>
                                <span>On-chain recording of Trust Scores</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="feature-card bg-gradient-to-br from-red-900/20 to-red-800/10 p-5 rounded-xl border border-red-800/30">
                        <div class="flex items-center gap-2 mb-3">
                            <div class="w-8 h-8 rounded-lg bg-red-500/20 flex items-center justify-center">
                                <svg class="w-5 h-5 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                                </svg>
                            </div>
                            <h3 class="font-semibold text-red-400">What We Don't Do</h3>
                        </div>
                        <ul class="text-sm text-gray-400 space-y-2">
                            <li class="flex items-start gap-2">
                                <span class="text-red-500 mt-0.5">•</span>
                                <span>We do not block transactions (Detection only)</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-red-500 mt-0.5">•</span>
                                <span>We do not access private keys</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-red-500 mt-0.5">•</span>
                                <span>We do not guarantee 100% accuracy (ML Probabilistic)</span>
                            </li>
                        </ul>
                    </div>
                </div>
                
                <!-- Technology Stack -->
                <div class="mt-6 pt-6 border-t border-gray-700/50">
                    <h4 class="text-sm font-semibold text-gray-400 mb-3 uppercase tracking-wider">Technology Stack</h4>
                    <div class="flex flex-wrap gap-2">
                        <span class="px-3 py-1.5 bg-[#008B8B]/20 border border-[#008B8B]/30 rounded-lg text-xs font-medium text-[#008B8B]">XGBoost ML</span>
                        <span class="px-3 py-1.5 bg-[#4682b4]/20 border border-[#4682b4]/30 rounded-lg text-xs font-medium text-[#4682b4]">Web3.js</span>
                        <span class="px-3 py-1.5 bg-purple-500/20 border border-purple-500/30 rounded-lg text-xs font-medium text-purple-400">Flask API</span>
                        <span class="px-3 py-1.5 bg-green-500/20 border border-green-500/30 rounded-lg text-xs font-medium text-green-400">Sepolia Testnet</span>
                        <span class="px-3 py-1.5 bg-yellow-500/20 border border-yellow-500/30 rounded-lg text-xs font-medium text-yellow-400">SQLAlchemy</span>
                        <span class="px-3 py-1.5 bg-pink-500/20 border border-pink-500/30 rounded-lg text-xs font-medium text-pink-400">Socket.IO</span>
                    </div>
                </div>
            </div>

            <!-- Live Activity Feed -->
            <div class="glass-panel p-6 rounded-xl hover-lift">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-lg font-semibold text-white">Live Activity</h3>
                    <div class="flex items-center gap-2">
                        <div class="relative flex h-3 w-3">
                            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                            <span class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span>
                        </div>
                        <span class="text-xs text-green-400 font-medium">LIVE</span>
                    </div>
                </div>
                
                <div class="space-y-4" id="live-activity">
                    <div class="text-center text-gray-500 text-sm py-8">
                        <svg class="w-12 h-12 mx-auto mb-2 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                        Waiting for transactions...
                    </div>
                </div>
            </div>
        </section>

        <!-- Charts Section -->
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="glass-panel p-6 rounded-xl hover-lift">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-lg font-semibold text-white flex items-center gap-2">
                        <span class="w-2 h-2 bg-[#008B8B] rounded-full animate-pulse"></span>
                        Transaction Risk Distribution
                    </h3>
                    <span class="text-xs text-gray-500 bg-gray-800/50 px-2 py-1 rounded">Real-time</span>
                </div>
                <div id="tx-risk-donut-chart" class="w-full h-80"></div>
            </div>
            
            <div class="glass-panel p-6 rounded-xl hover-lift">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-lg font-semibold text-white flex items-center gap-2">
                        <span class="w-2 h-2 bg-[#4682b4] rounded-full animate-pulse"></span>
                        Wallet Trust Levels
                    </h3>
                    <span class="text-xs text-gray-500 bg-gray-800/50 px-2 py-1 rounded">Updated</span>
                </div>
                <div id="wallet-trust-donut-chart" class="w-full h-80"></div>
            </div>
        </section>

    </main>

    <script>
        const CONFIG = { API_BASE: '', REFRESH_INTERVAL: 10000 };
        let socket;

        async function fetchStats() {
            try {
                const res = await fetch('/transactions?limit=500');
                const txs = await res.json();
                
                const highRisk = txs.filter(t => t.riskScore > 0.7).length;
                const wallets = new Set(txs.map(t => t.from)).size;

                document.getElementById('stat-total-tx').innerText = txs.length;
                document.getElementById('stat-high-tx').innerText = highRisk;
                document.getElementById('stat-total-wallets').innerText = wallets;

                renderCharts(txs);
            } catch(e) { 
                console.error("Stats error", e); 
            }
        }

        function renderCharts(txs) {
            // Risk Chart
            const risks = [
                txs.filter(t => t.riskScore > 0.7).length,
                txs.filter(t => t.riskScore > 0.4 && t.riskScore <= 0.7).length,
                txs.filter(t => t.riskScore <= 0.4).length
            ];
            
            new ApexCharts(document.querySelector("#tx-risk-donut-chart"), {
                series: risks,
                labels: ['High Risk', 'Medium Risk', 'Low Risk'],
                colors: ['#ef4444', '#f59e0b', '#22c55e'],
                chart: { 
                    type: 'donut', 
                    height: 320,
                    background: 'transparent',
                    animations: {
                        enabled: true,
                        easing: 'easeinout',
                        speed: 800,
                        animateGradually: {
                            enabled: true,
                            delay: 150
                        }
                    }
                },
                theme: { mode: 'dark' },
                dataLabels: { 
                    enabled: true,
                    style: {
                        fontSize: '14px',
                        fontWeight: 'bold',
                        colors: ['#fff']
                    },
                    dropShadow: {
                        enabled: false
                    }
                },
                plotOptions: { 
                    pie: { 
                        donut: { 
                            size: '70%',
                            labels: {
                                show: true,
                                name: {
                                    show: true,
                                    fontSize: '16px',
                                    color: '#9ca3af'
                                },
                                value: {
                                    show: true,
                                    fontSize: '24px',
                                    fontWeight: 'bold',
                                    color: '#fff'
                                },
                                total: {
                                    show: true,
                                    label: 'Total',
                                    fontSize: '16px',
                                    color: '#9ca3af',
                                    formatter: function (w) {
                                        return w.globals.seriesTotals.reduce((a, b) => a + b, 0)
                                    }
                                }
                            }
                        }
                    }
                },
                legend: {
                    position: 'bottom',
                    fontSize: '13px',
                    labels: {
                        colors: '#9ca3af'
                    },
                    markers: {
                        width: 12,
                        height: 12,
                        radius: 3
                    }
                },
                stroke: {
                    width: 2,
                    colors: ['#1a1f2e']
                },
                tooltip: {
                    theme: 'dark',
                    y: {
                        formatter: function(val) {
                            return val + ' transactions'
                        }
                    }
                }
            }).render();

            // Trust Chart
            const trusts = [
                txs.filter(t => t.walletScore > 0.7).length,
                txs.filter(t => t.walletScore > 0.4 && t.walletScore <= 0.7).length,
                txs.filter(t => t.walletScore <= 0.4).length
            ];
            
            new ApexCharts(document.querySelector("#wallet-trust-donut-chart"), {
                series: trusts,
                labels: ['Trusted', 'Neutral', 'Untrusted'],
                colors: ['#22c55e', '#4682b4', '#ef4444'],
                chart: { 
                    type: 'donut', 
                    height: 320,
                    background: 'transparent',
                    animations: {
                        enabled: true,
                        easing: 'easeinout',
                        speed: 800
                    }
                },
                theme: { mode: 'dark' },
                dataLabels: { 
                    enabled: true,
                    style: {
                        fontSize: '14px',
                        fontWeight: 'bold',
                        colors: ['#fff']
                    },
                    dropShadow: {
                        enabled: false
                    }
                },
                plotOptions: { 
                    pie: { 
                        donut: { 
                            size: '70%',
                            labels: {
                                show: true,
                                name: {
                                    show: true,
                                    fontSize: '16px',
                                    color: '#9ca3af'
                                },
                                value: {
                                    show: true,
                                    fontSize: '24px',
                                    fontWeight: 'bold',
                                    color: '#fff'
                                },
                                total: {
                                    show: true,
                                    label: 'Total',
                                    fontSize: '16px',
                                    color: '#9ca3af',
                                    formatter: function (w) {
                                        return w.globals.seriesTotals.reduce((a, b) => a + b, 0)
                                    }
                                }
                            }
                        }
                    }
                },
                legend: {
                    position: 'bottom',
                    fontSize: '13px',
                    labels: {
                        colors: '#9ca3af'
                    },
                    markers: {
                        width: 12,
                        height: 12,
                        radius: 3
                    }
                },
                stroke: {
                    width: 2,
                    colors: ['#1a1f2e']
                },
                tooltip: {
                    theme: 'dark',
                    y: {
                        formatter: function(val) {
                            return val + ' wallets'
                        }
                    }
                }
            }).render();
        }

        // Socket.IO connection for live updates
        function initializeSocket() {
            socket = io();
            
            socket.on('connect', () => {
                console.log('Connected to live feed');
            });
            
            socket.on('new_transaction', (data) => {
                updateLiveActivity(data);
                // Refresh stats
                fetchStats();
            });
        }

        function updateLiveActivity(tx) {
            const feed = document.getElementById('live-activity');
            const riskColor = tx.riskScore > 0.7 ? 'text-red-400' : tx.riskScore > 0.4 ? 'text-yellow-400' : 'text-green-400';
            const riskBg = tx.riskScore > 0.7 ? 'bg-red-900/20 border-red-800/30' : tx.riskScore > 0.4 ? 'bg-yellow-900/20 border-yellow-800/30' : 'bg-green-900/20 border-green-800/30';
            
            const item = document.createElement('div');
            item.className = `p-3 rounded-lg border ${riskBg} animate-fadeIn`;
            item.innerHTML = `
                <div class="flex items-center justify-between mb-2">
                    <span class="text-xs text-gray-400">New Transaction</span>
                    <span class="text-xs ${riskColor} font-semibold">${(tx.riskScore * 100).toFixed(0)}% Risk</span>
                </div>
                <div class="text-xs font-mono text-gray-300 truncate">${tx.transaction_hash || tx.id}</div>
                <div class="flex items-center justify-between mt-2 text-xs text-gray-500">
                    <span>${tx.value ? parseFloat(tx.value).toFixed(4) : '0.0000'} ETH</span>
                    <span>Just now</span>
                </div>
            `;
            
            feed.insertBefore(item, feed.firstChild);
            
            // Keep only last 5 items
            while (feed.children.length > 5) {
                feed.removeChild(feed.lastChild);
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            fetchStats();
            initializeSocket();
            
            // Refresh stats periodically
            setInterval(fetchStats, CONFIG.REFRESH_INTERVAL);
        });
    </script>
</body>
</html>